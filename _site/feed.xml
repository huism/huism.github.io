<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title></title>
    <description>程序员的日子又少一天。。。</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Thu, 15 Aug 2019 20:55:18 +0800</pubDate>
    <lastBuildDate>Thu, 15 Aug 2019 20:55:18 +0800</lastBuildDate>
    <generator>Jekyll v3.8.6</generator>
    
      <item>
        <title>Kafka难学吗</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#kafka&quot; id=&quot;markdown-toc-kafka&quot;&gt;Kafka&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#初识kafka&quot; id=&quot;markdown-toc-初识kafka&quot;&gt;初识Kafka&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#基本概念&quot; id=&quot;markdown-toc-基本概念&quot;&gt;基本概念&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#生产和消费初体验&quot; id=&quot;markdown-toc-生产和消费初体验&quot;&gt;生产和消费初体验&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#生产者&quot; id=&quot;markdown-toc-生产者&quot;&gt;生产者&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;kafka&quot;&gt;Kafka&lt;/h1&gt;

&lt;h2 id=&quot;初识kafka&quot;&gt;初识Kafka&lt;/h2&gt;
&lt;p&gt;apache kafka是由Apache开发的一种发布订阅消息系统，它是一个分布式、分区和重复的日志服务。Kafka之所以越来越受到青睐，得幸于它所扮演的三大角色：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;消息系统：Kafka不仅提供和传统消息系统（消息中间件）同样的系统解耦、存储冗余、流量削峰、缓冲、异步、可扩展、可恢复性等功能，而且提供消息顺序性保障和回溯消费的功能。&lt;/li&gt;
  &lt;li&gt;存储系统：Kafka将消息持久化到磁盘，相比内存，降低了消息丢失的风险。Kafka的消息持久化和多副本机制，让它可以作为长久的存储系统，只需设置消息保留策略即可。&lt;/li&gt;
  &lt;li&gt;流式处理平台：Kafka可以为其他流式处理框架提供数据来源，并且提供完整的流式处理类库。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;基本概念&quot;&gt;基本概念&lt;/h3&gt;
&lt;p&gt;一个典型的Kafka集群包括若干生产者（Producer）、若干节点（Broker）和若干消费者（Consumer），以及一个Zookeeper集群。如下图所示：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/styles/images/kafka/kafka-cluster.jpg&quot; alt=&quot;Kafka集群组成&quot; /&gt;&lt;/p&gt;

&lt;p&gt;其中Zookeeper是Kafka负责集群元数据管理，控制器的选举等操作。Producer是将消息发送到Borker，Borker负责将消息存储到磁盘，而Consumer负责从Broker订阅消息数据。&lt;/p&gt;

&lt;p&gt;整个kafka体系结构引入是哪个术语：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Producer：发送消息的一方，负责创建消息，发送到Kafka中。&lt;/li&gt;
  &lt;li&gt;Consumer：接收消息的一方，负责连接Kafka并接收消息，进而进行相应的业务逻辑。&lt;/li&gt;
  &lt;li&gt;Broker：服务代理节点。对于 Kafka 而言， Broker 可以简单地看作一个独立的 Kafka 服务节点或 Kafka服务实例。大多数情况下也可以将Broker看作一台Kafka服务器，前提是这台服务器上只部署了一个Kafka实例。一个或多个Broker组成了 一个Kafka集群。&lt;/li&gt;
  &lt;li&gt;Topic和Partition：Kafka中的消息以主题为单位进行归类，生产者将消息发送给特定的主题（发送到Kafka集群中的每条消息都需指定一个主题），而消费者负责订阅主题进行消费消息。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;主题和分区&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;topic是一个逻辑概念，它可以细分成很多partition，一个partition只能属于一个topic，有时候称分区为主题分区（Topic-Partition）。分区在存储层面上可以看成一个可追加得日志，消息被追加到某个分区时会分配一个特定的偏移量（offset）。offset是消息在分区上的唯一标识，Kafka用offset保障消息在分区上的顺序性，但是offset不是跨分区的，在分区间消息是无序的。&lt;/p&gt;

&lt;p&gt;如下图所示，主题中有4个分区，消息被顺序追加到每个分区日志文件的尾部。
&lt;img src=&quot;/styles/images/kafka/kafka-topic-partition.png&quot; alt=&quot;kafka解析主题-分区&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt;&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;同一topic下的不同partition上的数据是不同的。&lt;/li&gt;
    &lt;li&gt;一条消息只存储到某个topic中的一个partition上。&lt;/li&gt;
    &lt;li&gt;主题中的消息是分区内有序，分区间无序。&lt;/li&gt;
    &lt;li&gt;一个主题中的分区可以分布在不同的broker上，可以提供比单个broker更强大的性能。&lt;/li&gt;
    &lt;li&gt;不同的consumer会记录自己的消费offset。&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;如下图所示，生产者和消费者对分区内偏移量的维护。
&lt;img src=&quot;/styles/images/kafka/kafka-consumer-partition.png&quot; alt=&quot;分区内偏移量&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;每一条消息被发送到broker之前，会根据分区规则选择存储到哪个具体的分区。如果分区规则设定得合理，所有的消息都可以均匀地分配到不同的分区中。&lt;/p&gt;

  &lt;p&gt;如果一个主题只对应一个文件，那么这个文件所在的机器 I/O 将会成为这个主题的性能瓶颈，而分区解决了这个问题。&lt;/p&gt;

  &lt;p&gt;在创建主题的时候可以通过指定的参数来设置分区的个数，当然也可以在主题创建完成之后去修 改分区的数量，通过增加分区的数量可以实现水平扩展。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;多副本（Replica）机制&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Kafka 为分区引入了多副本机制， 通过增加副本数量可以提升容灾能力。同一分区的不同副本中保存的是相同的消息(在同一时刻，副本之间并非完全一样)。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;副本之间是 “一主多从”的关系，其中 leader副本负责处理读写请求， follower副本只负责与 leader副本的 消息同步。&lt;/li&gt;
  &lt;li&gt;副本处于不同的 broker 中 ，当 leader 副本出现故障时，从 follower 副本中重新选举新的 leader副本对外提供服务。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Kafka通过多副本机制实现了故障的自动转移，当 Kafka集群中某个 broker 失效时仍然能保证服务可用。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;多副本架构&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;如下图所示，Kafka集群中有4个broker，某个主题中有3个分区，且副本因子(即副本个数〉也为 3，如此每个分区便有1个 leader副本和 2个 follower副本 。生产者和消费者只与leader副本进行交互，而follow副本只负责消息的同步，很多时候follower副本中的消息相对leader副本而言会有一定的滞后。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/styles/images/kafka/kafka-muti-part.png&quot; alt=&quot;多副本架构&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;分区中的所有副本统称为 AR ( Assigned Replicas)。所有与leader 副本保持一定程度同步的副本(包括leader副本在内）组成ISR (On-Sync Replicas)，ISR 集合是 AR 集合中的一个子集。&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;消息会先发送leader副本，然后 follower副本才能从leader副本中拉取消息进行同步，同步期间内 follower 副本相对于 leader 副本而言会有一定程度的滞后。&lt;/li&gt;
    &lt;li&gt;前面所说的“一定程度 的同步”是指可忍受的滞后范围，这个范围可以通过参数进行配置。&lt;/li&gt;
    &lt;li&gt;与 leader 副本同步滞后过多的副本(不包括leader副本)组成OSR(Out-of-Sync Replicas)，由此可见，AR=ISR+OSR。&lt;/li&gt;
    &lt;li&gt;在正常情况下，所有的follower副本都应该与leader副本保持一定程度的同步，即 AR=ISR, OSR 集合为空。&lt;/li&gt;
    &lt;li&gt;leader 副本负责维护和跟踪ISR 集合中所有follower副 本的滞后状态，当follower 副本落后 太多或失效时，leader副本会把它从ISR集合中剔除。&lt;/li&gt;
    &lt;li&gt;如果OSR集合中有follower副本“追上’了leader副本，那么 leader副本会把它从OSR集合转移至ISR集合。&lt;/li&gt;
    &lt;li&gt;默认情况下，当leader副本发生故障时，只有在ISR集合中的副本才有资格被选举为新的leader，而在OSR集合中的副本则没有任何机会(不过这个原则也可以通过修改相应的参数配置来改变)。&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Kafka 的复制机制既不是完全的同步复制，也不是单纯的异步复制。&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;生产和消费初体验&quot;&gt;生产和消费初体验&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;终端初体验&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;创建一个名为&lt;code class=&quot;highlighter-rouge&quot;&gt;topic_name&lt;/code&gt;的主题，并且该主题有4个分区，每个分区副本因子为3。&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# kafka-topic.sh --zookeeper node1:2181 --create --topic toptic_name --replication-factor 3 --partition 4&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;展示主题&lt;code class=&quot;highlighter-rouge&quot;&gt;topic_name&lt;/code&gt;的信息。&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# kafka-topic.sh --zookeeper node1:2181 --describe --topic topic_name&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;创建消费者,并且消费主题&lt;code class=&quot;highlighter-rouge&quot;&gt;topic_name&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# kafka-console-consumer.sh --bootstrap-server node1:9092 --topic topic_name&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;创建生产者，并且生产消息到主题&lt;code class=&quot;highlighter-rouge&quot;&gt;topic_name&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# kafka-console-producer.sh --broker-list node1:9092 --topic topic_name&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;hello world！    &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;输入消息，在消费者终端可以看到此输出&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;IDE初体验&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;1.添加依赖&lt;/p&gt;

&lt;p&gt;Kafka的Java相关maven依赖：&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupid&amp;gt;&lt;/span&gt;org.apache.kafka&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupid&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactid&amp;gt;&lt;/span&gt;kafka_clients&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactid&amp;gt;&lt;/span&gt;    
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.0.0&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2.生产者&lt;/p&gt;

&lt;p&gt;生产者要往Kafka中写入消息。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;首先要创建一个生产者客户端实例并设置一些配置参数。&lt;/li&gt;
  &lt;li&gt;然后构建消息的ProducerRecord对象，其中必须包含所要发往的主题及消息的消息体，进而再通过生产者客户端实例将消息发出。&lt;/li&gt;
  &lt;li&gt;最后可以通过close()方法来关闭生产者客户端实例并回收相应的资源。&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Producer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//生产者客户端配置&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;Properties&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prop&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Properties&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;prop&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;bootstrap-server&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;node1:9092&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;....&lt;/span&gt;
        
        &lt;span class=&quot;c1&quot;&gt;//创建生产者实例&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;KafkaProducer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;producer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;KafkaProducer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prop&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        
        &lt;span class=&quot;c1&quot;&gt;//构建消息实体&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;ProducerRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;record&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ProducerRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;topic_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;message&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        
        &lt;span class=&quot;c1&quot;&gt;//发送消息&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;producer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printStackTrace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        
        &lt;span class=&quot;c1&quot;&gt;//关闭资源&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;producer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;3.消费者&lt;/p&gt;

&lt;p&gt;消费者订阅主题消费消息：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;首先创建一个消费者客户端实例并配置相应的参数。&lt;/li&gt;
  &lt;li&gt;然后订阅主题并消费即可。&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Consumer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(){&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//消费者客户端配置&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;Properties&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prop&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Properties&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;prop&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;bootstrap-server&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;node1:9092&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;prop&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;group.id&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;group_name&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;....&lt;/span&gt;
        
        &lt;span class=&quot;c1&quot;&gt;//创建消费者实例&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;KafkaConsumer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;consumer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;KafkaConsumer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prop&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        
        &lt;span class=&quot;c1&quot;&gt;//订阅主题&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;consumer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;subscribe&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Collection&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;singletoList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;topic_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
        
        &lt;span class=&quot;c1&quot;&gt;//循环消费消息&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            &lt;span class=&quot;nc&quot;&gt;ConsumerRecords&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;records&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;consumer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;poll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Duration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;ofMillis&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ConsumerRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;record&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;records&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
                &lt;span class=&quot;nc&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;生产者&quot;&gt;生产者&lt;/h2&gt;

&lt;p&gt;待续&lt;/p&gt;
</description>
        <pubDate>Thu, 15 Aug 2019 20:08:00 +0800</pubDate>
        <link>http://localhost:4000/2019/08/15/Kafka/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/08/15/Kafka/</guid>
        
        <category>hadoop</category>
        
        
        <category>笔记</category>
        
      </item>
    
      <item>
        <title>搭建Hadoop生态环境</title>
        <description>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;
&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;/&gt;&lt;meta name=&quot;exporter-version&quot; content=&quot;Evernote Mac 9.1.1 (458384)&quot;/&gt;&lt;meta name=&quot;author&quot; content=&quot;smh201411@163.com&quot;/&gt;&lt;meta name=&quot;created&quot; content=&quot;2019-04-17 03:03:33 +0000&quot;/&gt;&lt;meta name=&quot;source&quot; content=&quot;desktop.win&quot;/&gt;&lt;meta name=&quot;source-application&quot; content=&quot;yinxiang.win32&quot;/&gt;&lt;meta name=&quot;updated&quot; content=&quot;2019-08-13 07:48:50 +0000&quot;/&gt;&lt;title&gt;搭建hadoop平台&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 24px;&quot;&gt;Hadoop大数据生态圈环境搭建&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 18px;&quot;&gt;&lt;b&gt;&lt;br/&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 18px;&quot;&gt;&lt;b&gt;&lt;br/&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;ol&gt;&lt;li&gt;&lt;div&gt;&lt;span style=&quot;font-size: 18px; font-weight: bold;&quot;&gt;Apache 大数据平台&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;table style=&quot;border-collapse: collapse; min-width: 100%;&quot;&gt;&lt;colgroup&gt;&lt;col style=&quot;width: 130px;&quot;/&gt;&lt;col style=&quot;width: 130px;&quot;/&gt;&lt;col style=&quot;width: 130px;&quot;/&gt;&lt;col style=&quot;width: 130px;&quot;/&gt;&lt;col style=&quot;width: 130px;&quot;/&gt;&lt;/colgroup&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;Node1&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;Node2&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;Node3&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;Node4&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;Jdk&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;Zookeeper&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;Hadoop&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️主&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️主&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;Scala&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;Kafka&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;Mysql&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;Hbase&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️主&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;Spark&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️主&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;✔️&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;&quot;&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;ol start=&quot;2&quot;&gt;&lt;li&gt;&lt;div&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;span style=&quot;font-size: 18px; font-weight: bold;&quot;&gt;安装VirtualBox虚拟机软件&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;div&gt;        1）下载VirtualBox软件&lt;a href=&quot;https://www.virtualbox.org/wiki/Downloads&quot;&gt;https://www.virtualbox.org/wiki/Downloads&lt;/a&gt;，之后安装即可（傻瓜式安装）。&lt;/div&gt;&lt;div&gt;        2）配置网卡&lt;/div&gt;&lt;ul&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;增加仅主机(Host-Only)网络，配置IP地址和IPv4网络掩码，并设置不启动DHCP服务器。&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;IPv4地址：192.168.56.1&lt;/div&gt;&lt;div&gt;IPv4网络掩码：255.255.255.0&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;设置NAT网络（若无则创建），支持DHCP，一般有默认此项不必改变。&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;div&gt;        3）新建虚拟机，系统选择CentOS 7，版本是CentOS-7-x86_64-Minimal-1511。&lt;/div&gt;&lt;ul&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;第一步：创建虚拟机。 选择Linux、Linux版本，创建动态分配的VHD虚拟硬盘，创建好虚拟机之后进入下一步，&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&gt;第二步：设置创建的虚拟机。存储中光盘需要选择你IOS系统文件所在的目录文件。之后设置网络，网卡1设为NAT网络；网卡2启动，并设为仅主机(Host-Only)网络选择相应的网卡。&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&gt;第三步：安装系统。首先，启动系统，之后选择语言：English；选择日期时区Data&amp;amp;Time设置为Asia/Shanghai；选择安装硬盘位置INSTALLATION SOURCE为默认；设置INSTALLATION DESTINATION为默认（需要进入并选择Done）；设置NETWORK &amp;amp; HOST NAME，启动两个网卡，并设置Host Name为node1（数字1为虚拟机编号，之后通过node*来通信）；最后确认后开始安装；在安装时可以设置root用户密码。&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;div&gt;        4）重复3）步骤创建5台同样的CentOS虚拟机，可以选择复制虚拟机快速创建多台虚拟机。&lt;/div&gt;&lt;div&gt;            &lt;span style=&quot;color: rgb(255, 38, 0);&quot;&gt;注意：如果复制虚拟机，需要勾选重新分配MAC地址。复制虚拟机时，主机名也一同复制，需要修改/etc/hostname文件中的内容来修改主机名，否则会在之后（查看hdfs的datanode节点）产生影响&lt;/span&gt;&lt;/div&gt;&lt;ol start=&quot;3&quot;&gt;&lt;li&gt;&lt;div&gt;&lt;span style=&quot;font-size: 18px;&quot;&gt;&lt;span style=&quot;font-size: 18px; font-weight: bold;&quot;&gt;CentOS虚拟机网络配置&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;通过命令 ip addr 可以查看所有网卡信息（l0可以忽略）。&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&gt;通过命令 vi /etc/sysconfig/network-scripts/ifcfg-enp0s3 设置enp0s3网卡（主要是集群内访问）属性：&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;ONBOOT=“yes”       //设置网卡开机自启，默认为yes，本注释不用写入配置文件中&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;通过命令 vi /etc/hosts 配置hosts文件，集群中集群需要通过此配置文件来连通。可以通过命令 ping node2 来测试是否配置连接成功。&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;10.0.2.7 node1        // 地址是通过命令 ip addr 查看的enp0s3的IP地址，node1是集群中虚拟机中名字用于记忆使用方便&lt;/div&gt;&lt;div&gt;10.0.2.8 node2&lt;/div&gt;&lt;div&gt;10.0.2.9 node3&lt;/div&gt;&lt;div&gt;10.0.2.10 node4&lt;/div&gt;&lt;div&gt;10.0.2.11 node5&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;通过命令 vi /etc/sysconfig/network-scripts/ifcfg-enp0s8 设置enp0s8网卡（主要是外界访问）属性：&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;ONBOOT=“yes”&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;BOOTPROTO=none&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;IPADDR=192.168.56.101        //新增，IP地址&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;NETMASK=255.255.255.0        //新增，掩码&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;NETWORK=192.168.56.0         //新增，网关&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 38, 0);&quot;&gt;        注意：&lt;/span&gt;其中BOOTPROTO是设置不启动DHCP服务器；IPADDR是设置网卡IPv4地址；NETMASK是网络掩码；NETWORK是网关地址。&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;重启网络服务，命令：service network restart&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&gt;将集群所有虚拟机都重新配置以上两张网卡。&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;ol start=&quot;4&quot;&gt;&lt;li&gt;&lt;div&gt;&lt;span style=&quot;font-size: 18px; font-weight: bold;&quot;&gt;新建Hadoop用户，SSH免密登录连接&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;div&gt;        新建hadoop用户，来管理所有的hadoop生态圈内的应用程序，并且在hadoop用户下使用此Hadoop生态圈应用程序，并且设置免密连接。如果不想添加用户，可以由root用户来管理所有程序，跳过新建用户，直接进行免密连接操作。&lt;/div&gt;&lt;div&gt;     &lt;span style=&quot;color: rgb(255, 38, 0);&quot;&gt;（由此开始规定：#后面的命令是root用户执行的命令，$后面的命令是hadoop用户执行的命令）&lt;/span&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;新建用户&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# groupadd hadoop         //新建用户组，组名为hadoop&lt;/div&gt;&lt;div&gt;# useradd -s /bin/bash -g hadoop -d /home/hadoop -m hadoop        //新建用户，用户名为hadoop&lt;/div&gt;&lt;div&gt;# passwd hadoop         //设置用户hadoop的登录密码，需要输入相同的两次&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;免密连接&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;# su hadoop&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;// 在node1上执行，可以使node1向获得其密钥的节点免密登录连接，如命令 $ ssh node2&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;$ ssh-keygen -t rsa         //生成密钥&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;$ ssh-copy-id node1         //分发密钥&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;$ ssh-copy-id node2         //分发密钥&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ol start=&quot;5&quot;&gt;&lt;li&gt;&lt;div&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;span style=&quot;font-size: 18px; font-weight: bold;&quot;&gt;集群时间同步&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;div&gt;        同一集群内机器需要同步时间，避免不必要的麻烦。&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;安装时间同步软件&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;# yum install -y ntpdate&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;# yum install -y ntp&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;选择一台节点作为时间服务器（如node1），其他为客户端节点向服务器节点时间同步，配置时间服务器节点&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# vi /etc/ntp.conf&lt;/div&gt;&lt;div&gt;// 注释掉文件中的以下四行，即在行首添加“#”&lt;/div&gt;&lt;div&gt;server 0.centos.pool.ntp.org iburst &lt;/div&gt;&lt;div&gt;server 1.centos.pool.ntp.org iburst &lt;/div&gt;&lt;div&gt;server 2.centos.pool.ntp.org iburst &lt;/div&gt;&lt;div&gt;server 3.centos.pool.ntp.org iburst&lt;/div&gt;&lt;div&gt;// 文件最下面加入 &lt;/div&gt;&lt;div&gt;restrict default ignore &lt;/div&gt;&lt;div&gt;restrict 10.0.2.0 mask 255.255.255.0 nomodify notrap &lt;/div&gt;&lt;div&gt;server 127.127.1.0&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;重启ntpd服务&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;# service ntpd restart&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;设置ntpd服务开机自启&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# chkconfig ntpd on&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;余下的客户端节点，配置如下：&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# crontab -e       // 设定每天 00:00 向服务器同步时间，并写入日志&lt;/div&gt;&lt;div&gt;// 输入以下内容，保存，退出。&lt;/div&gt;&lt;div&gt;0 0 * * * /usr/sbin/ntpdate cluster1&amp;gt;&amp;gt; /root/ntpd.log&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;手动向时间服务器节点同步时间：&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# ntpdate node1         //假设时间服务器节点为node1&lt;/div&gt;&lt;/div&gt;&lt;ol start=&quot;6&quot;&gt;&lt;li&gt;&lt;div&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;span style=&quot;font-size: 18px; font-weight: bold;&quot;&gt;J&lt;/span&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;span style=&quot;font-size: 18px; font-weight: bold;&quot;&gt;DK环境安装配置&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;将jdk安装包上传到虚拟机节点中，我下载的是jdk1.8.0_201版本的。jdk安装到/usr/local目录下。&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&gt;将安装包解压。&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# cp ./jdk-8u201-linux-x64.tar.gz /usr/local/&lt;/div&gt;&lt;div&gt;# cd /usr/local &lt;/div&gt;&lt;div&gt;# tar -zxvf ./jdk-8u201-linux-x64.tar.gz&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;配置JDK环境变量&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;export JAVA_HOME=/usr/local/jdk1.8.0_201             // Java家目录&lt;/div&gt;&lt;div&gt;export JRE_HOME=/usr/local/jdk1.8.0_201/jre         // jre家目录&lt;/div&gt;&lt;div&gt;export CLASSPATH=.:$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATH &lt;/div&gt;&lt;div&gt;export PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin:$JAVA_HOME&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;测试安装是否成功，使用如下命令，若不报错，出现版本信息，则安装成功。&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# java -version&lt;/div&gt;&lt;/div&gt;&lt;div&gt;以上是集群所有节点的基础安装环境配置&lt;/div&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;ol start=&quot;7&quot;&gt;&lt;li&gt;&lt;div&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;span style=&quot;font-size: 18px; font-weight: bold;&quot;&gt;Hadoop集群部署（搭建高可用(HA)集群）&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;div&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;table style=&quot;border-collapse: collapse; min-width: 100%;&quot;&gt;&lt;colgroup&gt;&lt;col style=&quot;width: 108px;&quot;/&gt;&lt;col style=&quot;width: 106px;&quot;/&gt;&lt;col style=&quot;width: 99px;&quot;/&gt;&lt;col style=&quot;width: 89px;&quot;/&gt;&lt;col style=&quot;width: 96px;&quot;/&gt;&lt;col style=&quot;width: 87px;&quot;/&gt;&lt;col style=&quot;width: 114px;&quot;/&gt;&lt;/colgroup&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style=&quot;width: 108px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 106px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;Namenode-1&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 99px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;Namenode-2&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 89px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;Datanode&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 96px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;Zookeeper&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 87px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;ZKFC&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 114px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div&gt;JournalNode&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width: 108px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;Node1&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 106px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 99px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 89px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 96px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 87px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 114px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width: 108px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;Node2&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 106px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 99px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 89px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 96px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 87px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 114px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width: 108px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;Node3&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 106px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 99px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 89px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 96px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 87px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 114px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width: 108px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;Node4&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 106px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 99px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 89px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 96px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 87px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 114px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width: 108px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;Node5&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 106px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 99px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 89px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 96px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 87px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 114px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;ol start=&quot;8&quot;&gt;&lt;li&gt;&lt;div&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;span style=&quot;font-size: 18px; font-weight: bold;&quot;&gt;Hadoop安装（HA of HDFS）&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;版本：Hadoop 3.1.1&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&gt;上传hadoop-2.6.5 安装包到虚拟机节点node1中，解压到/opt目录中。&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# cp ./hadoop-2.6.5.tar.gz  /opt      // 复制安装包到/opt目录下&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;# cd /opt&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;# tar -zxvf hadoop-2.6.5.tar.gz       // 解压&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;修改配置文件&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# cd /opt/hadoop-2.6.5/etc/hadoop        // 进入Hadoop配置文件所在目录，配置文件都在 etc/hadoop 目录下&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;修改 hadoop-env.sh 配置文件，在文末尾添加如下配置：&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;export JAVA_HOME=/usr/local/jdk1.8.0_201            // 指定Java安装路径，自己机器上真实路径&lt;/div&gt;&lt;div&gt;export HDFS_NAMENODE_USER=hadoop&lt;/div&gt;&lt;div&gt;export HDFS_DATANODE_USER=hadoop&lt;/div&gt;&lt;div&gt;export HDFS_SECONDARYNAMENODE_USER=hadoop&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;修改 core-site.xml 配置文件，添加如下：&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;&lt;font face=&quot;Monaco&quot;&gt; &amp;lt;!-- 在&amp;lt;configurations&amp;gt;&amp;lt;/configuration&amp;gt;内添加    —&amp;gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;name&amp;gt;fs.defaultFS&amp;lt;/name&amp;gt;               &amp;lt;!-- 集群的逻辑名    —&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;value&amp;gt;hdfs://mycluster&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;!-- 集群数据存放本地路径，namenode,datanode数据都会存在这里，会自动生成./ha/dfs/name 目录和 ./ha/dfs/data —-&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;name&amp;gt;hadoop.tmp.dir&amp;lt;/name&amp;gt; &lt;/div&gt;&lt;div&gt;        &amp;lt;value&amp;gt;/home/hadoop/hadoop_files/ha&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;name&amp;gt;fs.trash.interval&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;value&amp;gt;1440&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;name&amp;gt;ha.zookeeper.quorum&amp;lt;/name&amp;gt;        &amp;lt;!-- zookeeper集群节点，ip:port，用“,”分割    —&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;value&amp;gt;node2:2181,node3:2181,node4:2181&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;/property&amp;gt;&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;修改 hdfs-site.xml 配置文件，添加如下：&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;    &amp;lt;!—- 添加到&amp;lt;configuration&amp;gt;&amp;lt;/configuration&amp;gt;中    —-&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;!—- 备份个数  —-&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;name&amp;gt;dfs.replication&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;value&amp;gt;2&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;!—- 集群逻辑名，同core-site.xml文件中的fs.defaultFS逻辑名保持一致  —-&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;name&amp;gt;dfs.nameservices&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;value&amp;gt;mycluster&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;!—- NameNode节点逻辑名  —-&amp;gt;&lt;/div&gt;&lt;div&gt;          &amp;lt;name&amp;gt;dfs.ha.namenodes.mycluster&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;          &amp;lt;value&amp;gt;nn1,nn2&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;!—- NameNode节点逻辑名对应的节点物理地址，ip:port，指向namenode1 —-&amp;gt;&lt;/div&gt;&lt;div&gt;          &amp;lt;name&amp;gt;dfs.namenode.rpc-address.mycluster.nn1&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;          &amp;lt;value&amp;gt;node1:8020&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;!—- NameNode节点逻辑名对应的地址，ip:port，指向namenode2  —-&amp;gt;&lt;/div&gt;&lt;div&gt;          &amp;lt;name&amp;gt;dfs.namenode.rpc-address.mycluster.nn2&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;          &amp;lt;value&amp;gt;node2:8020&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;/property&amp;gt;    &lt;/div&gt;&lt;div&gt;    &amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;!—- NameNode节点的web ui访问地址和端口，ip:port，namenode1的web UI —-&amp;gt;&lt;/div&gt;&lt;div&gt;          &amp;lt;name&amp;gt;dfs.namenode.http-address.mycluster.nn1&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;!—- ip地址填真实的地址，若有两张网卡，注意区分  —-&amp;gt;&lt;/div&gt;&lt;div&gt;          &amp;lt;value&amp;gt;192.168.56.101:50070&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;          &amp;lt;name&amp;gt;dfs.namenode.http-address.mycluster.nn2&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;          &amp;lt;value&amp;gt;192.168.56.102:50070&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;!—- 指向journalnode节点，qjournal://ip:port,ip:port   —-&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;name&amp;gt;dfs.namenode.shared.edits.dir&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;value&amp;gt;qjournal://node1:8485;node2:8485;node3:8485/mycluster&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;!—- namenode向journalnode同步数据存储的本地路径，自己设置  —-&amp;gt;&lt;/div&gt;&lt;div&gt;      &amp;lt;name&amp;gt;dfs.journalnode.edits.dir&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;      &amp;lt;value&amp;gt;/home/hadoop/hadoop_files/ha/journal&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;        &amp;lt;!—- 代理，只需照着设置即可  —-&amp;gt;&lt;/div&gt;&lt;div&gt;      &amp;lt;name&amp;gt;dfs.client.failover.proxy.provider.mycluster&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;      &amp;lt;value&amp;gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;          &amp;lt;name&amp;gt;dfs.ha.fencing.methods&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;          &amp;lt;value&amp;gt;shell(/bin/true)&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;       &amp;lt;name&amp;gt;dfs.ha.automatic-failover.enabled&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;       &amp;lt;value&amp;gt;true&amp;lt;/value&amp;gt;    &lt;/div&gt;&lt;div&gt;    &amp;lt;/property&amp;gt;&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;修改 slaves 配置文件，添加如下：&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt; // 文件中删除其他内容，添加如下内容，注意，此注释勿写进文件，配置的是datanode节点的主机名，3.x版本中是worker文件&lt;/div&gt;&lt;div&gt;node2&lt;/div&gt;&lt;div&gt;node3&lt;/div&gt;&lt;div&gt;node4&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;启动Hadoop集群&lt;/div&gt;&lt;/li&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;启动 Zookeeper 集群&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;$ zkServer.sh start         //在每个zookeeper集群节点上运行一次&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;启动 JouranlNode 进程（在node1,node2,node3上启动）&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;$ hadoop-daemon.sh start journalnode        //在需要的节点启动&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;格式化 ZKFC &lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;$ hdfs zkfc -formatZK        // 在node1上运行&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;格式化 NameNode 节点，并且启动NameNode&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt; // （只在node1节点上运行）&lt;/div&gt;&lt;div&gt;$ hdfs namenode –format&lt;/div&gt;&lt;div&gt;$ hadoop-daemon.sh start namenode&lt;/div&gt;&lt;div&gt; // （只在node2节点上运行）&lt;/div&gt;&lt;div&gt;$ hdfs namenode –bootstrapStandby&lt;/div&gt;&lt;div&gt;$ hadoop-deamon.sh start namenode&lt;/div&gt;&lt;div&gt; // （关闭所有nodenode进程，在node1和node2节点上分别运行如下命令）&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;$ hadoop-daemon.sh stop namenode    &lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;启动 Hadoop&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;$ start-dfs.sh    // 只在node1节点上运行，并是hadoop用户，journal进程已启动，会提示先关闭，可忽略。&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;正常启动后，集群节点内有如下进程，可进行验证。&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;div&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;table style=&quot;border-collapse: collapse; min-width: 100%;&quot;&gt;&lt;colgroup&gt;&lt;col style=&quot;width: 87px;&quot;/&gt;&lt;col style=&quot;width: 102px;&quot;/&gt;&lt;col style=&quot;width: 105px;&quot;/&gt;&lt;col style=&quot;width: 92px;&quot;/&gt;&lt;col style=&quot;width: 223px;&quot;/&gt;&lt;col style=&quot;width: 99px;&quot;/&gt;&lt;/colgroup&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style=&quot;width: 87px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 102px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;Namenode&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 105px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;Datanode&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 92px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;Zookeeper&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 223px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;DFSZKFailoverController(zkfc)&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 99px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;Journalnode&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width: 87px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;Node1&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 102px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 105px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 92px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 223px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 99px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width: 87px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;Node2&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 102px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 105px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 92px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 223px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 99px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width: 87px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;Node3&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 102px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 105px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 92px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 223px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 99px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width: 87px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;Node4&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 102px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 105px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 92px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;*&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 223px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;width: 99px; padding: 8px; border: 1px solid;&quot;&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br/&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;ol start=&quot;9&quot;&gt;&lt;li&gt;&lt;div&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;span style=&quot;font-size: 18px; font-weight: bold;&quot;&gt;安装Scala&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;将Scala安装到集群所有节点上，并分配给hadoop用户使用&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&gt;将安装包解压到 /opt/ 目录下（在node1上执行）&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;将Scala分发到其他节点上（在node1上执行）&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# scp -r /opt/scala-2.10.6 node2:/opt/            // 分发到所有节点，node2,node3,node4&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;配置环境变量 命令：vi /etc/profile 在末尾追加如下内容（在所有节点上执行）&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;export SCALA_HOME=/opt/scala-2.10.6            # Scala的安装路径&lt;/div&gt;&lt;div&gt;export PATH=$PATH:$SCALA_HOME/bin&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;刷新环境变量（在所有节点上执行）&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# source /etc/profile&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;修改用户所有者（在所有节点上执行）&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# chown -R hadoop:hadoop /opt/scala-1.10.6        // 修改所有节点的Scala安装目录所拥有的用户&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;ol start=&quot;10&quot;&gt;&lt;li&gt;&lt;div&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;span style=&quot;font-size: 18px; font-weight: bold;&quot;&gt;安装Kafka&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;规划在node1,node3,node4上安装kafka。&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&gt;将kafka安装包拷贝到/opt/ 目录下，解压（以下在node1上执行）&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# cp ./kafka_2.10-0.8.2.1.tgz /opt/&lt;/div&gt;&lt;div&gt;# tar -zxvf kafka_2.10-0.8.2.1.tgz&lt;/div&gt;&lt;div&gt;# cd /opt/&lt;/div&gt;&lt;div&gt;# mv kafka_2.10-0.8.2.1 kafka&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;添加环境变量 &lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# vi /etc/profile&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;// 在文件末尾中添加如下内容&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt; e&lt;/span&gt;&lt;font face=&quot;Monaco&quot;&gt;xport KAFKA_HOME=/opt/kafka&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Monaco&quot;&gt; export PATH=$PATH:$KAFKA_HOME/bin&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Monaco&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;// 保存退出后，更新环境变量&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;# source /etc/profile&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;修改配置文件 /opt/kafka/config/server.properties &lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;// 修改内容如下&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Monaco&quot;&gt;Broker.id=0        //指定broker的ID，&lt;b&gt;从0开始&lt;/b&gt;，&lt;b&gt;每个节点不同&lt;/b&gt;，node3是1，node4是2&lt;/font&gt;&lt;/div&gt;&lt;div&gt;log.dirs=/home/hadoop_files/kafka-logs        // 指定kafka存储日志数据的路径&lt;/div&gt;&lt;div&gt;zookeeper.connect=node2:2181,node3:2181,node4:2181     // 指定zookeeper集群节点&lt;/div&gt;&lt;div&gt;advertised.host.name=192.168.56.101        // 指定本节点(node1)的IP地址，其他kafka集群节点更改成自己的IP地址&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;创建kafka数据存放路径（是log.dirs配置的值）&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# mkdir -p /home/hadoop/hadoop_files/kafka-logs&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;修改文件权限，更改为hadoop用户权限&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# chown -R hadoop:hadoop /opt/kafka &lt;/div&gt;&lt;div&gt;# chown -R hadoop:hadoop /home/hadoop_files/kafka-logs&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;分发安装好的程序到kafka集群其他节点（node3,node4），在node1上执行&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# cd /opt/&lt;/div&gt;&lt;div&gt;# scp -r ./kafka/  node3:`pwd`        // 分发到node3节点上&lt;/div&gt;&lt;div&gt;# scp -r ./kafka/  node4:`pwd`        // 分发到node4节点上&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;在node3上修改 server.properties 中的broker.id （在node3上执行）&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;broker.id=1&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;在node4上修改 server.properties 中的broker.id（在node4上执行）&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;broker.id=2&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;新建存储日志数据的路径目录，并其修改权限和 /opt/kafka的权限为hadoop用户。（在node3和node4上分别执行）&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&gt;新建启动脚本和关闭脚本，&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;# cd /opt/kafka/bin&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;# vi start-kafka.sh&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;// 在文件中添加如下内容（一行内容，无换号），保存&lt;/span&gt;&lt;/div&gt;&lt;div&gt; nohup kafka-server-start.sh /opt/kafka/config/server.properties &amp;gt; /home/hadoop/hadoop_files/kafka-logs/kafka-start.log 2&amp;gt;&amp;amp;1 &amp;amp;&lt;/div&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;div&gt;# vi stop-kafka.sh&lt;/div&gt;&lt;div&gt;// 在文件中添加如下内容,一行内容，无换号，保存&lt;/div&gt;&lt;div&gt; kafka-server-stop.sh&lt;/div&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;div&gt;# chmod u+x start-kafka.sh                // 添加可执行权限&lt;/div&gt;&lt;div&gt;# chmod u+x start-kafka.sh                // 添加可执行权限&lt;/div&gt;&lt;div&gt;# chown -R hadoop:hadoop /opt/kafka       // 修改所属用户&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;完成安装，通过如下测试&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;# su hadoop&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;// &lt;b&gt;保证zookeeper集群已经启动&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;$ start-kafka.sh        // 启动kafka&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;$ &lt;/span&gt;kafka-topics.sh --create --zookeeper cluster1:2181,cluster2:2181,cluster3:2181 --replication-factor 3 --partitions 1 --topic mykafka            // 创建topic&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;$ stop-kafka.sh         // 关闭kafka&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;ol start=&quot;11&quot;&gt;&lt;li&gt;&lt;div&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;span style=&quot;font-size: 18px; font-weight: bold;&quot;&gt;安装MySQL&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;在集群节点node2上安装MySQL，其他节点不需要安装。（以下只在node2中执行）&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&gt;预先安装 screen ，perl， perl-devel， autoconf 四个软件&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&gt;将安装包上传到节点上，解压到/usr/local/ 目录下，并重命名为mysql&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# cd /usr/local/&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;# tar -zxvf /usr/local/&lt;/span&gt;mysql-5.6.37-linux-glibc2.12-x86_64.tar.gz&lt;/div&gt;&lt;div&gt;# mv mysql-5.6.37-linux-glibc2.12-x86_64 mysql&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;修改环境变量&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# vi /etc/profile &lt;/div&gt;&lt;div&gt;// 在最下面添加 &lt;/div&gt;&lt;div&gt; export MYSQL_HOME=/usr/local/mysql &lt;/div&gt;&lt;div&gt; export PATH=$PATH:$MYSQL_HOME/bin&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;// 刷新环境变量&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;# source /etc/profile&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;新建 mysql 用户&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# groupadd mysql 在/etc/group 中可以看到 &lt;/div&gt;&lt;div&gt;# useradd -r -g mysql -s /bin/false mysql 在/etc/passwd 中可以看到 &lt;/div&gt;&lt;div&gt;# cd /usr/local/mysql &lt;/div&gt;&lt;div&gt;# chown -R mysql:mysql .&lt;/div&gt;&lt;div&gt;# scripts/mysql_install_db --user=mysql&lt;/div&gt;&lt;/div&gt;&lt;div&gt;注意：若运行 scripts/mysql_install_db --user=mysql 报错，需要安装 perl , perl-devel , autoconf，再次运行，即可解决。&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;修改当前目录拥有者为 root 用户&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# chown -R root .&lt;/div&gt;&lt;div&gt;# chown -R mysql data        // 修改当前 data 目录拥有者为 mysql 用户&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;新建一个虚拟窗口，叫 mysql，运行命令&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# screen -S mysql&lt;/div&gt;&lt;div&gt;# bin/mysqld_safe --user=mysql &amp;amp;&lt;/div&gt;&lt;div&gt;// 退出虚拟窗口 &lt;/div&gt;&lt;div&gt;# Ctrl+A+D &lt;/div&gt;&lt;div&gt;# cd /usr/local/mysql&lt;/div&gt;&lt;div&gt;// 登陆 mysql &lt;/div&gt;&lt;div&gt;# bin/mysql&lt;/div&gt;&lt;div&gt;// 登陆成功后退出即可 &lt;/div&gt;&lt;div&gt;# exit;&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;进行 root 账户密码的修改等操作&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# bin/mysql_secure_installation&lt;/div&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;div&gt;首先要求输入 root 密码，由于我们没有设置过 root 密码，括号里面说了，如果没有 root 密码就直接按回车。 是否设定 root 密码，选 y，设定密码为 cluster，是否移除匿名用户：y。然后有个是否关闭 root 账户的远程 登录，选 n，删除 test 这个数据库？y，更新权限？y，然后 ok。&lt;/div&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;div&gt;# cp support-files/mysql.server /etc/init.d/mysql.server&lt;/div&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;div&gt;// 进入 mysql 虚拟窗口 &lt;/div&gt;&lt;div&gt;# screen -r mysql &lt;/div&gt;&lt;div&gt;// 查看 mysql 的进程号 &lt;/div&gt;&lt;div&gt;# ps -ef | grep mysql &lt;/div&gt;&lt;div&gt;// 如果有的话就 kill 掉，保证 mysql 已经中断运行了，一般 kill 掉/usr/local/mysql/bin/mysqld 开头的即可 &lt;/div&gt;&lt;div&gt;# kill 进程号&lt;/div&gt;&lt;div&gt;// 退出虚拟窗口&lt;/div&gt;&lt;div&gt;# Ctrl+A+D&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;启动MySQL服务&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# /etc/init.d/mysql.server start -user=mysql           //（-user参数可省略）&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;配置一下访问权限&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;$ mysql -u root -p &lt;/div&gt;&lt;div&gt;mysql&amp;gt; GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'cluster' WITH GRANT OPTION;&lt;/div&gt;&lt;div&gt;mysql&amp;gt; FLUSH PRIVILEGES;&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;关闭MySQL&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;// 关闭 mysql 的指令（不需要执行） &lt;/div&gt;&lt;div&gt;# mysqladmin -u root -p shutdown&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;注意：每次启动节点，若执行 mysql -u root -p 报错&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;                ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)&lt;/div&gt;&lt;div&gt;        解决：需要启动MySQL服务，执行启动MySQL命令：&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# /etc/init.d/mysql.server start -user=mysql&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/div&gt;&lt;ol start=&quot;12&quot;&gt;&lt;li&gt;&lt;div&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;span style=&quot;font-size: 18px; font-weight: bold;&quot;&gt;安装Hbase&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;规划在node2, node3, node4 节点中安装Hbase，其中node2作为主节点，node2, node3, node4作为从节点&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&gt;在 node2 节点 /opt/ 解压 hbase 安装包，（在node2上执行）&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;# cd /opt/&lt;/span&gt;&lt;/div&gt;&lt;div&gt;# tar -zxvf hbase-1.2.6-bin.tar.gz&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;修改配置环境，（在node2上执行）&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;修改 hbase-env.sh &lt;/div&gt;&lt;div&gt;# vi hbase-env.sh &lt;/div&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;div&gt;将 JAVA_HOME, HADOOP_HOME, HBASE_LOG_DIR, HBASE_MANAGES_ZK 修改为以下内容： 记得去掉前面的#&lt;/div&gt;&lt;div&gt; export JAVA_HOME=/usr/local/jdk1.8.0_201         # 配置 JDK 安装路径&lt;/div&gt;&lt;div&gt; export HADOOP_HOME=/opt/hadoop-2.6.5      # 配置 Hadoop 安装路径  &lt;/div&gt;&lt;div&gt; export HBASE_LOG_DIR=/home/hadoop_files/hbase/logs      # 设置 HBase 的日志目录&lt;/div&gt;&lt;div&gt; export HBASE_MANAGES_ZK=false        # 使用独立的 ZooKeeper 集群&lt;/div&gt;&lt;div&gt; export HBASE_PID_DIR=/home/hadoop_files/hbase        # 设置 pid 的路径&lt;/div&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;div&gt;配置 hbase-site.xml&lt;/div&gt;&lt;div&gt;# vi hbase-site.xml&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;添加如下配置&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;name&amp;gt;hbase.zookeeper.quorum&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;value&amp;gt;node2,node3,node4&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;description&amp;gt;zookeeper集群节点&amp;lt;/description&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;name&amp;gt;hbase.rootdir&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;value&amp;gt;hdfs://node1:8020/hbase&amp;lt;/value&amp;gt;    &lt;i&gt;&amp;lt;value&amp;gt;hdfs://mycluster/hbase&amp;lt;/value&amp;gt;若是HA的hadoop则需要修改为集群名称&lt;/i&gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;description&amp;gt;hbase数据存放到HDFS中的路径&amp;lt;/description&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;name&amp;gt;hbase.cluster.distributed&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;value&amp;gt;true&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;description&amp;gt;是否启动分布式&lt;/div&gt;&lt;div&gt;      false: standalone and pseudo-distributed setups with managed ZooKeeper&lt;/div&gt;&lt;div&gt;      true: fully-distributed with unmanaged ZooKeeper Quorum (see hbase-env.sh)&lt;/div&gt;&lt;div&gt;    &amp;lt;/description&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;name&amp;gt;hbase.zookeeper.property.dataDir&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;value&amp;gt;/home/hadoop/hadoop_files/zk&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;description&amp;gt;Property from ZooKeeper config zoo.cfg.指向zookeeper的存放数据路径&amp;lt;/description&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;name&amp;gt;hbase.tmp.dir&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;value&amp;gt;/home/hadoop/hadoop_files/hbase/tmp&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;description&amp;gt;存储临时数据路径&amp;lt;/description&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;     &amp;lt;name&amp;gt;zookeeper.session.timeout&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;     &amp;lt;value&amp;gt;120000&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;name&amp;gt;hbase.master.info.port&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;value&amp;gt;16010&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;description&amp;gt;Hbase Master的web UI访问端口&amp;lt;/description&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;name&amp;gt;hbase.regionserver.info.port&amp;lt;/name&amp;gt;    &lt;/div&gt;&lt;div&gt;    &amp;lt;value&amp;gt;16030&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;description&amp;gt;Hbase regionServer的web UI访问端口&amp;lt;/description&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;lt;property&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;name&amp;gt;hbase.zookeeper.property.clientPort&amp;lt;/name&amp;gt;&lt;/div&gt;&lt;div&gt;    &amp;lt;value&amp;gt;2181&amp;lt;/value&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;lt;/property&amp;gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;// 配置 regionservers节点&lt;/div&gt;&lt;div&gt;# vi regionservers &lt;/div&gt;&lt;div&gt;删除 localhost 添加如下内容： &lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Monaco&quot;&gt;node2&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Monaco&quot;&gt;node3&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Monaco&quot;&gt;node4&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Monaco&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;// 删除 hbase 的 slf4j-log4j12-1.7.5.jar，解决 hbase 和 hadoop 的 LSF4J 包冲突 &lt;/div&gt;&lt;div&gt;# cd /opt/hbase-1.2.6/lib &lt;/div&gt;&lt;div&gt;# mv slf4j-log4j12-1.7.5.jar slf4j-log4j12-1.7.5.jar.bk&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;将 hbase 工作目录同步到集群其它节点，（在node2上执行）&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# scp -r /opt/hbase-1.2.6/ cluster3:/opt/ &lt;/div&gt;&lt;div&gt;# scp -r /opt/hbase-1.2.6/ cluster4:/opt/&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;创建hbase缓存、日志路径（所有节点）&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# mkdir -p /home/hadoop_files/hbase/tmp&lt;/div&gt;&lt;div&gt;# mkdir -p /home/hadoop_files/hbase/logs&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;改权限（所有节点）&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# chown -R hadoop:hadoop /opt/hbase-1.2.6&lt;/div&gt;&lt;div&gt;# chown -R hadoop:hadoop /home/hadoop_files/hbase&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;修改环境变量&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# vi /etc/profile &lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;添加如下内容&lt;/span&gt;&lt;/div&gt;&lt;div&gt;export HBASE_HOME=/usr/local/hbase-1.2.6 &lt;/div&gt;&lt;div&gt;export PATH=$HBASE_HOME/bin:$PATH &lt;/div&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;div&gt;# source /etc/profile&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;启动 HBase（主节点node2 上），需要切换到hadoop用户下&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;注意：先启动 zookeeper，Hadoop 的 HDFS 和 YARN，然后才能启动 HBase&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;$ start-dfs.sh&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;$ start-yarn.sh&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;$ start-hbase.sh&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;$ stop-hbase.sh&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;测试，可以访问web UI ，node2:16010&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;ol start=&quot;13&quot;&gt;&lt;li&gt;&lt;div&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;span style=&quot;font-size: 18px; font-weight: bold;&quot;&gt;安装Spark&lt;/span&gt;&lt;/font&gt;&lt;br/&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;规划在node1, node3, node4节点上安装spark。&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&gt;上传spark安装包到node1节点上，解压到 /opt/ 目录下，（在node1节点上执行）&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# cd /opt&lt;/div&gt;&lt;div&gt;# tar -zxvf spark-1.6.3-bin-hadoop2.6.tgz&lt;/div&gt;&lt;div&gt;# mv spark-1.6.3-bin-hadoop2.6.tgz spark-1.6.3        // 重命名为spark-1.6.3&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;配置环境变量&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# vi /etc/profile &lt;/div&gt;&lt;div&gt;添加以下内容： &lt;/div&gt;&lt;div&gt; export SPARK_HOME=/usr/local/spark-1.6.3&lt;/div&gt;&lt;div&gt; export PATH=$SPARK_HOME/bin:$PATH&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;color: rgb(255, 38, 0);&quot;&gt;主节点要再加一行（node1）：&lt;/font&gt; &lt;/div&gt;&lt;div&gt; export PATH=$SPARK_HOME/sbin:$PATH&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;修改配置文件，（在node1上执行）&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# cd /opt/spark-1.6.3&lt;/div&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;div&gt;复制 conf 文件夹里面 template 一份，改名为 spark-env.sh &lt;/div&gt;&lt;div&gt;# cp conf/spark-env.sh.template conf/spark-env.sh&lt;/div&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;在spark-env.sh文件中添加如下内容&lt;/span&gt;&lt;/div&gt;&lt;div&gt; export SPARK_MASTER_IP=node1            // 主节点的主机名&lt;/div&gt;&lt;div&gt; export SPARK_MASTER_PORT=7077           // 主节点的端口&lt;/div&gt;&lt;div&gt; export SPARK_WORKER_CORES=2&lt;/div&gt;&lt;div&gt; export SPARK_MASTER_WEBUI_PORT=8888        // 主节点web ui的端口,默认是8080&lt;/div&gt;&lt;div&gt; export SPARK_WORKER_MEMORY=1g           // 运行内存&lt;/div&gt;&lt;div&gt; export HADOOP_CONF_DIR=/opt/hadoop-2.6.5/etc/hadoop        // hadoop的配置文件所在目录的路径&lt;/div&gt;&lt;div&gt; export SPARK_PID_DIR=/home/hadoop/hadoop_files/spark        // spark存储数据的目录路径，可以填自己的&lt;/div&gt;&lt;div&gt; export JAVA_HOME=/usr/local/jdk1.8.0_201                // jdk安装路径，根据自己实际的填写&lt;/div&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;div&gt;# vi conf/slaves         // 从节点的主机名&lt;/div&gt;&lt;div&gt;添加以下几行 &lt;/div&gt;&lt;div&gt; node3&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt; n&lt;/span&gt;&lt;font face=&quot;Monaco&quot;&gt;ode4&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;分发到从节点上（这里是node3, node4），在node1上执行&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;// 复制到所有的服务器上 &lt;/div&gt;&lt;div&gt;# scp -r /opt/spark-1.6.3 node3:/opt/&lt;/div&gt;&lt;div&gt;# scp -r /opt/spark-1.6.3 node4:/opt/&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;修改 spark 文件夹的权限（每个 spark 结点）&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# chown -R hadoop:hadoop /opt/spark-1.6.3&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;运行spark集群，（在主节点node1上执行）&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;        注意：&lt;/div&gt;&lt;ul&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;spark应用中 sbin/start-all.sh 命令是和Hadoop中start-all.sh 命令重名，并且路径都在PATH中，谁在前，启动谁。所以，需要修改spark的运行命令名为start-spark.sh。同样stop-all.sh也需如此。&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&gt;若不将 spark的 sbin/ 路径加入到PATH中，则不需要上一步，但是每次启动需要进入 /opt/spark-1.6.3/sbin 目录下启动命令 start-all.sh 。&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;运行 spark 前需启动 hadoop 的 HDFS 和 YARN&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;在主节点中，启动全部spark集群。&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;$ start-spark.sh&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;关闭&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;$ stop-spark.sh&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;分别启动spark集群中主，从节点&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;$ start-master.sh&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;$ start-slaves.sh&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;测试可以查看进程，访问web界面更 node1:8888&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</description>
        <pubDate>Mon, 12 Aug 2019 15:08:00 +0800</pubDate>
        <link>http://localhost:4000/2019/08/12/%E6%90%AD%E5%BB%BAhadoop%E5%B9%B3%E5%8F%B0/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/08/12/%E6%90%AD%E5%BB%BAhadoop%E5%B9%B3%E5%8F%B0/</guid>
        
        <category>大数据</category>
        
        
        <category>document</category>
        
      </item>
    
      <item>
        <title>Welcome to Jekyll!</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#zhugeliang&quot; id=&quot;markdown-toc-zhugeliang&quot;&gt;诫子书&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;First POST build by Jekyll.&lt;/p&gt;

&lt;h2 id=&quot;zhugeliang&quot;&gt;诫子书&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/styles/images/jiezishu.jpg&quot; alt=&quot;诫子书&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;#&quot;&gt;诸葛亮&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;夫君子之行，静以修身，俭以养德。非淡泊(澹泊)无以明志，非宁静无以致远。夫学须静也，才须学也。非学无以广才，非志无以成学。淫慢则不能励精，险躁则不能冶性。
年与时驰，意与日去，遂成枯落，多不接世，悲守穷庐，将复何及！&lt;/p&gt;

</description>
        <pubDate>Wed, 17 Apr 2019 13:31:01 +0800</pubDate>
        <link>http://localhost:4000/2019/04/17/welcome-to-jekyll/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/04/17/welcome-to-jekyll/</guid>
        
        <category>jekyll</category>
        
        
        <category>jekyll</category>
        
      </item>
    
  </channel>
</rss>
